/*! Yoodoo 2015-09-28 */

yoodoo.actionLogging={add:function(a,b){(void 0==b.timestamp||null===b.timestamp)&&(b.timestamp=(new Date).getTime()+yoodoo.serverTimeOffset),b.type=a,yoodoo.actionLog.push(b),clearTimeout(yoodoo.idleLogout),yoodoo.stayin||(yoodoo.idleLogout=setTimeout("yoodoo.logout();",144e5))},output:function(){var a=Base64.encode(dooit.json(yoodoo.actionLog));return yoodoo.actionLog=[],a}},yoodoo.replaceMeta=function(a){return a=a.replace(/\__(.+?)__/g,function(a,b){var c=b.split("|");return void 0!==yoodoo.user.meta[c[0]]&&""!=yoodoo.user.meta[c[0]]?yoodoo.user.meta[c[0]].replace(/\"/g,"&dq;").replace(/\'/g,"&sq;").replace(/\</g,"&lt;").replace(/\n/g,"<br />"):c.length>1?c[1].replace(/\'/g,"&sq;").replace(/\"/g,"&dq;").replace(/\</g,"&lt;").replace(/\n/g,"<br />"):""})},yoodoo.replaceResourceUrl=function(a){return a},yoodoo.scrollTo=function(a){var b=$(a).position().top-$(".dooitBox").position().top-100;$("#yoodooScrolledArea").animate({scrollTop:b})},yoodoo.dooitFiles=null,yoodoo.showingForgot=!1,yoodoo.showFullLoginForm=function(){"none"==$(".password").css("display")&&(yoodoo.showingForgot=!1,$(".password").slideDown().next().slideDown(),$(".forgotten>a").slideDown(),$(".forgotten>div").slideUp())},yoodoo.tryLogin=function(){var a=$(yoodoo.frame).find(".login input:first").val();if(yoodoo.showingForgot){if(""!=a){yoodoo.actionLogging.add("Reset password",{id:a});var b={cmd:yoodoo.cmd.forgotpassword.server,username:escape(a),callback:"yoodoo."+yoodoo.cmd.forgotpassword.callback};yoodoo.sendPost(null,b)}}else{var c=$(yoodoo.frame).find(".login input[type=password]").val();if(c=c.replace(/[^a-z^0-9]/gi,""),""==a||""==c){var d=$(yoodoo.frame).find(".login .error");d.html(yoodoo.w("needbothdetails")),d.slideDown(yoodoo.animateDuration),d.fadeIn(yoodoo.animateDuration),yoodoo.timer=setTimeout("yoodoo.hideError();",3e3)}else yoodoo.login(a,c)}},yoodoo.forgotReply=function(a){if("Success"==a){yoodoo.actionLogging.add("Login error",{});var b=$(yoodoo.frame).find(".login .error");b.html(yoodoo.w("newpasswordemailed")),b.fadeIn(yoodoo.animationDuration),yoodoo.timer=setTimeout("yoodoo.hideError();",8e3),yoodoo.showFullLoginForm()}else{""==a&&(a=yoodoo.w("issueapology")),yoodoo.actionLogging.add("Login error",{});var b=$(yoodoo.frame).find(".login .error");b.html(a),b.fadeIn(yoodoo.animationDuration),yoodoo.timer=setTimeout("yoodoo.hideError();",3e3)}},yoodoo.getAverageScore=function(){if(yoodoo.bookcaseLoaded){var a=yoodoo.bookcase.averageScore();a>0?$("#averageScoreDiv").html("Average quiz score: <b>"+a.toFixed(1)+"%</b>").css({display:"block"}):$("#averageScoreDiv").css({display:"block"})}else $("#averageScoreDiv").css({display:"none"})},yoodoo.loseBubble=function(){$(".advisorBubble").fadeOut(3e3,function(){$(this).remove()})},yoodoo.switchVersion=function(){this.html5=!this.html5,this.restart()},yoodoo.welcomeContainers={},yoodoo.toggleWelcomeTab=function(a){return yoodoo.first_login&&!yoodoo.password_updated?!1:void($(a).hasClass("on")||($(yoodoo.welcomeContainers.tabcontent[$(a.parentNode).find("button.on").removeClass("on").prevAll("button.tabSelector").get().length]).slideUp(500),$(yoodoo.welcomeContainers.tabcontent[$(a).addClass("on").prevAll(".tab.tabSelector").get().length]).slideDown(500)))},yoodoo.welcomeOpen=!1,yoodoo.closeWelcome=function(){this.welcomeOpen=!1,this.hide(function(){$(yoodoo.welcomeContainers.frame).remove()})},yoodoo.welcome=function(){this.welcomeOpen=!0;var a=this.option.width-40,b=this.option.height-40,c=[yoodoo.w("mydetails"),yoodoo.w("mypassword"),yoodoo.w("mydashboard")],d=2;yoodoo.password_updated||(d=1),yoodoo.welcomeContainers.tabcontent=[];for(var e=0;e<c.length;e++)yoodoo.welcomeContainers.tabcontent.push(yoodoo.e("div"));var f=yoodoo.e("div");$(f).addClass("error").css({display:"none"});var g=yoodoo.e("div");$(g).addClass("messenger").css({display:"none"}),yoodoo.welcomeContainers.frame=yoodoo.e("div"),$(yoodoo.welcomeContainers.frame).append(f).append(g).addClass("yoodooBackground"),yoodoo.welcomeContainers.content=yoodoo.e("div"),yoodoo.welcomeContainers.tabarea=yoodoo.e("div"),$(yoodoo.welcomeContainers.tabarea).css({position:"relative"}),("true"==this.first_login||this.first_login===!0)&&(this.first_login=!0);var h='<div class="yoodoo-title">'+this.replaceDomain(this.site.welcome_title)+'</div><h2 class="clear">'+(""==this.home_screen_title?"&nbsp;":this.home_screen_title)+'</h2><center class="clear"><button type="button" id="continue" class="onlyContinue green reversed" onclick="yoodoo.closeWelcome();">'+yoodoo.w("continue")+"</button>";yoodoo.bookcaseLoaded||(h+='<div id="xmlwaiting">'+yoodoo.w("loadingpleasewait")+"</div>"),h+="</center>";var i=yoodoo.e("button");if($(i).attr("type","button").addClass("logout medium right").html(yoodoo.w("logout")).bind("click",function(){yoodoo.logout()}),$(yoodoo.welcomeContainers.content).css({width:a,height:b}).addClass("dashboardLogo").html(h).append(yoodoo.welcomeContainers.tabarea),this.user.advisorAcceptance&&(this.user.advisor||this.user.advised)){var j=yoodoo.w("openadvisorpanel"),k=[],l="";this.user.advisor&&(this.user.adviseeUnread>0||this.user.adviseeRequests>0)?(l="",this.user.adviseeUnread>0&&(l+=" ["+this.user.adviseeUnread+"]"),this.user.adviseeRequests>0&&(l+=" <b>["+this.user.adviseeRequests+"]</b>"),this.user.adviseeUnread>0&&k.push(yoodoo.w("youhave")+this.user.adviseeUnread+yoodoo.w("message"+(1==this.user.adviseeUnread?"":"s")+"fromyourusers")+"."),this.user.adviseeRequests>0&&k.push(yoodoo.w("youhave")+this.user.adviseeRequests+" "+yoodoo.w("dooit"+(1==this.user.adviseeRequests?"":"s"))+yoodoo.w("requiringyouracceptance")+".")):this.user.advised&&this.user.advisorUnread>0&&(l=" ["+this.user.advisorUnread+"]",k.push(yoodoo.w("youhave")+this.user.advisorUnread+yoodoo.w("message"+(1==this.user.advisorUnread?"":"s")+"fromyouradvisor")+"."));var m="";k.length>0&&(j=k.join("\n"),m="<div class='advisorBubble'><div>"+k.join("<br />")+"<div class='spike'></div></div></div>",setTimeout("yoodoo.loseBubble();",5e3));var n=yoodoo.e("button");$(n).html(yoodoo.w("advisorpanel")+l+m).addClass("green medium right advisorButton").css({position:"relative",display:yoodoo.password_updated?"inline-block":"none"}).bind("click",function(){yoodoo.hide(yoodoo.advisorPanelShow)}),n.id="advisorButton",n.title=j,$(yoodoo.welcomeContainers.content).prepend(n)}$(yoodoo.welcomeContainers.content).prepend(i),yoodoo.clearTransition(yoodoo.container),$(yoodoo.welcomeContainers.frame).addClass("welcome").css({width:a,height:b,visibility:"hidden"}).append(yoodoo.welcomeContainers.content),$(yoodoo.container).empty().append(yoodoo.welcomeContainers.frame).css({visibility:"hidden",display:"block"}),yoodoo.welcomeContainers.topPanel=yoodoo.e("div"),$(yoodoo.welcomeContainers.topPanel).css({clear:"both"}),yoodoo.welcomeContainers.bottomPanel=yoodoo.e("div"),yoodoo.welcomeContainers.bottomPanelContainer=yoodoo.e("div"),$(yoodoo.welcomeContainers.bottomPanelContainer).css({clear:"both",position:"relative"}).append(yoodoo.welcomeContainers.bottomPanel),$(yoodoo.welcomeContainers.tabcontent[2]).append(yoodoo.welcomeContainers.topPanel).append(yoodoo.welcomeContainers.bottomPanelContainer);for(var o=Math.floor(b-($(yoodoo.welcomeContainers.tabarea).offset().top-$(yoodoo.welcomeContainers.content).offset().top)),p=Math.floor(o/2-5),e=0;e<c.length;e++)$(yoodoo.welcomeContainers.tabcontent[e]).addClass("tabcontent").css({margin:"0px -20px",height:o,display:d==e?"block":"none"}),$(yoodoo.welcomeContainers.tabarea).append(yoodoo.welcomeContainers.tabcontent[e]);$(yoodoo.welcomeContainers.topPanel).css({height:p}),$(yoodoo.welcomeContainers.bottomPanel).css({height:p,overflow:"hidden"}),$(yoodoo.welcomeContainers.frame).css({visibility:"visible"});var q=$(yoodoo.welcomeContainers.content).find(">center");if($(yoodoo.welcomeContainers.content).append(q),$(yoodoo.welcomeContainers.topPanel).css({width:this.option.width,margin:"5px 0px"}).addClass("yd_overlay"),$(yoodoo.welcomeContainers.bottomPanel).css({width:this.option.width,margin:"5px 0px"}).addClass("yd_overlay"),yoodoo.welcomeContainers.tabs=yoodoo.e("div"),$(yoodoo.welcomeContainers.tabs).addClass("tabs"),this.user.groups===!0){var r=yoodoo.e("button");$(r).attr("type","button").html(yoodoo.w("mygroups")).addClass("tab"),$(r).bind("click",function(){yoodoo.groups.manage()}),$(yoodoo.welcomeContainers.tabs).append(r)}for(var e=0;e<c.length;e++){var r=yoodoo.e("button");$(r).attr("type","button").html(c[e]).addClass("tabSelector tab"+(d==e?" on":"")),$(r).bind("click",function(){yoodoo.toggleWelcomeTab(this)}),$(yoodoo.welcomeContainers.tabs).append(r)}if(yoodoo.welcomeContainers.anchorWidget=yoodoo.e("div"),$(yoodoo.welcomeContainers.anchorWidget).css({width:0,height:p,"float":"left"}),$(yoodoo.welcomeContainers.tabarea).append(yoodoo.welcomeContainers.tabs),$(yoodoo.welcomeContainers.topPanel).append(yoodoo.welcomeContainers.anchorWidget),yoodoo.welcomeContainers.notices=yoodoo.e("div"),yoodoo.user.unreadComments>0){for(var s=this.notices.length-1;s>=0;s--)void 0!==this.notices[s].type&&"unreadcomment"===this.notices[s].type&&this.notices.splice(s,1);this.notices.unshift({type:"unreadcomment",warning:!1,width:100,background:"#fff",content:'<div style="text-align:center;padding:10px 0px 0px 0px;"><div class="commentIconOnly" onclick="yoodoo.comments.show()">'+yoodoo.comments.unreadButtonProcess()+"</div>"+yoodoo.w("comments")+"</div>"})}var t="";if("object"==typeof this.notices&&this.notices.length>0){var u=Math.floor(this.option.width/4);p-2>u&&(u=p-2);for(var s=0;s<this.notices.length;s++){var a=u;this.notices[s].width>0&&(a=this.notices[s].width),t+="<div class='"+(this.notices[s].warning?"warningNotice":"Notice")+"' style='width:"+a+"px;height:"+(p-2)+"px;'><div style='",void 0!==this.notices[s].background&&(t+="background:"+this.notices[s].background+";"),t+="height:"+(p-22)+"px;padding:5px;' class='scrollStyle'>"+this.notices[s].content+"</div></div>"}t='<div class="noticesContainer">'+t+"</div>"}else t+="<div class='tipContent' style='height:"+p+"px;'>"+this.home_left_text+"</div>";$(yoodoo.welcomeContainers.notices).css({width:"100%",height:p,"float":"left"}).html('<div class="tipContainer" style="height:'+p+'px;">'+t+"</div>"),$(yoodoo.welcomeContainers.topPanel).append(yoodoo.welcomeContainers.notices);var v=0;$(yoodoo.welcomeContainers.notices).find(".noticesContainer").find(">div").each(function(a,b){v+=$(b).outerWidth(!0)}),$(yoodoo.welcomeContainers.notices).find(".noticesContainer").css({width:v}),"object"==typeof this.notices&&this.notices.length>0&&this.initSlider($(yoodoo.welcomeContainers.notices).find(".tipContainer").get(0),$(yoodoo.welcomeContainers.notices).find(".noticesContainer").get(0),{horizontal:!0}),yoodoo.user.oldusername=yoodoo.user.username;var w=[{label:yoodoo.w("emailaddress"),ref:"emailaddress",length:100,mobileType:"email"},{label:yoodoo.w("firstname"),ref:"firstname",length:20,keyup:function(){""==yoodoo.user.nickname&&$(yoodoo.frame).find("input#nickname").val($(yoodoo.frame).find("input#firstname").val()+" "+$(yoodoo.frame).find("input#lastname").val())}},{label:yoodoo.w("lastname"),ref:"lastname",length:20,keyup:function(){""==yoodoo.user.nickname&&$(yoodoo.frame).find("input#nickname").val($(yoodoo.frame).find("input#firstname").val()+" "+$(yoodoo.frame).find("input#lastname").val())}},{label:yoodoo.w("username").toLowerCase(),ref:"username",length:128,keydown:function(a){var b=yoodoo.keyCode(a);return b.alpha||b.numeric||b.dash||b.navigate?void 0:(a.preventDefault(),!1)}},{label:yoodoo.w("nickname"),ref:"nickname",length:255}],x=yoodoo.e("div"),y=!1;""==yoodoo.user.nickname&&""!=yoodoo.user.firstname&&(yoodoo.user.nickname=yoodoo.user.firstname+" "+yoodoo.user.lastname,y=!0);for(var z=0;z<w.length;z++){var A=yoodoo.e("div");$(A).addClass("clear inputline");var B=yoodoo.e("label");$(A).append($(B).html(w[z].label));var C=yoodoo.e("input");yoodoo.mobile&&void 0!==w[z].mobileType?$(C).attr("type",w[z].mobileType):$(C).attr("type","text"),C.id=C.ref=w[z].ref;var D=yoodoo.user[w[z].ref];void 0!==w[z].keypress&&$(C).bind("keypress",w[z].keypress),void 0!==w[z].keydown&&$(C).bind("keydown",w[z].keydown),void 0!==w[z].keyup&&$(C).bind("keyup",w[z].keyup),$(C).bind("keyup",function(){var a=$(this).val(),b=yoodoo.user[this.ref];b!=a&&(yoodoo.user[this.ref]=a,$(this.parentNode.parentNode).find("button").slideDown())}),$(A).append($(C).attr("maxlength",w[z].length).val(D)),$(x).append(A)}var E=yoodoo.e("button");$(E).attr("type","button").addClass("green").css({"margin-left":"250px",display:y?"block":"none"}).html("change"),$(x).append(E),$(E).bind("click",function(){if("change"==$(this).html()){var a=/^[a-z0-9]{1,}/i.test(yoodoo.user.username);if(a)$(this).html(yoodoo.w("changing")+"..."),yoodoo.changeDetails(yoodoo.user.firstname,yoodoo.user.lastname,yoodoo.user.username,yoodoo.user.emailaddress,yoodoo.user.nickname);else{var b=$(yoodoo.frame).find(".welcome .error");b.html(yoodoo.w("emptyusername")),b.fadeIn(yoodoo.animateDuration),yoodoo.timer=setTimeout("yoodoo.hideError();",3e3)}}}),$(yoodoo.welcomeContainers.tabcontent[0]).append(x).addClass(this.class_prefix+"_overlay");var F=yoodoo.e("div");yoodoo.password_updated||$(F).html('<div class="alert">'+yoodoo.w("changepasswordwarning")+"</div>");var G=yoodoo.e("div");$(G).addClass("clear inputline").html("<label>"+yoodoo.w("yourcurrentpassword")+'</label><input type="password" id="oldpassword" maxlength="20" />');var H=yoodoo.e("div");$(H).addClass("clear inputline").html("<label>"+yoodoo.w("yournewpassword")+'</label><input type="password" id="newpassword" maxlength="20" />');var I=yoodoo.e("div");$(I).addClass("clear inputline").html("<label>"+yoodoo.w("confirmpassword")+'</label><input type="password" id="newpasswordagain" maxlength="20" />');var E=yoodoo.e("button");if($(E).attr("type","button").addClass("green").css({"margin-left":"250px",display:"none"}).html(yoodoo.w("change")),$(F).append(G).append(H).append(I).append(E),$(F).find("input[type=password]").bind("keyup",function(a){/[^a-z^0-9]/i.test(this.value)&&(this.value=this.value.replace(/[^a-z^0-9]/gi,""))}),$(yoodoo.welcomeContainers.tabcontent[1]).append(F).addClass(this.class_prefix+"_overlay"),$(E).bind("click",function(){if("change"==$(this).html()){var a=$(yoodoo.welcomeContainers.tabcontent[1]).find("#oldpassword").val(),b=$(yoodoo.welcomeContainers.tabcontent[1]).find("#newpassword").val(),c=$(yoodoo.welcomeContainers.tabcontent[1]).find("#newpasswordagain").val(),d=/^[a-z0-9]{6,}/i.test(b);if(d&&b==c&&""!=a)$(this).html("changing..."),yoodoo.changePassword(yoodoo.username,a,b),$(yoodoo.welcomeContainers.tabcontent[1]).find("input").val("");else{var e=$(yoodoo.frame).find(".welcome .error");b!=c?e.html(yoodoo.w("passwordnotmatch")):e.html(yoodoo.w("passwordlength")),e.fadeIn(yoodoo.animateDuration),yoodoo.timer=setTimeout("yoodoo.hideError();",3e3)}}}),$(yoodoo.welcomeContainers.tabcontent[1]).find("input").bind("keyup",function(){var a=$(yoodoo.welcomeContainers.tabcontent[1]).find("#oldpassword").val(),b=$(yoodoo.welcomeContainers.tabcontent[1]).find("#newpassword").val(),c=$(yoodoo.welcomeContainers.tabcontent[1]).find("#newpasswordagain").val();b==c&&""!=b&&""!=a?$(yoodoo.welcomeContainers.tabcontent[1]).find("button").slideDown():$(yoodoo.welcomeContainers.tabcontent[1]).find("button").slideUp()}),""!=yoodoo.option.introMovie.flashvars.intro){var J=yoodoo.e("div");$(J).addClass("footerLinks").html('<a href="javascript:void(0)" class="" onclick="yoodoo.showIntro(true)">'+yoodoo.w("showintro")+"</a>"),$(yoodoo.welcomeContainers.content).append(J)}$(yoodoo.container).css({visibility:"visible",display:"none"}),yoodoo.revealAnimation($(yoodoo.container).css({visibility:"visible"}),function(){yoodoo.bookcaseLoaded&&yoodoo.bookcase.fetchWidgets()})},yoodoo.noticeScroller=function(){var a=$(this.frame).find(".welcomeContent .tip").get();if(1==a.length){var b=$(a).find(".noticeContainer"),c=$(b).find(">div"),d=$(a).find(".noticeScroller");if(c.outerHeight(!1)>b.height()){var e=yoodoo.e("div");e.proportion=b.height()/c.outerHeight(!1),e.overallheight=d.height();var f=Math.floor(e.overallheight*e.proportion);e.space=e.overallheight-f,e.target=b,e.maxscroll=b.height()-c.outerHeight(!1),$(e).addClass("scrollButton").css({height:f}),d.get(0).appendChild(e),$(e).bind("mousedown",function(a){a.preventDefault(),$(this).addClass("scrolling"),this.offsetY=a.pageY,this.initialTop=parseInt($(this).css("top").replace(/px/,"")),yoodoo.noticeScrollerObject=this,$(document).bind("mousemove",noticeScroll=function(a){var b=yoodoo.noticeScrollerObject.initialTop+a.pageY-yoodoo.noticeScrollerObject.offsetY;0>b&&(b=0),b>yoodoo.noticeScrollerObject.space&&(b=yoodoo.noticeScrollerObject.space);var c=yoodoo.noticeScrollerObject.maxscroll*(b/yoodoo.noticeScrollerObject.space);yoodoo.noticeScrollerObject.target.get(0).scrollTop=-c,$(yoodoo.noticeScrollerObject).css({top:b})}),$(document).bind("mouseleave mouseup",docmouse=function(a){$(yoodoo.noticeScrollerObject).removeClass("scrolling"),$(document).unbind("mouseleave mouseup",docmouse),$(document).unbind("mousemove",noticeScroll)})})}}},yoodoo.hideError=function(){$(this.frame).find(".error").animate({opacity:0,height:0},500,function(){$(this).css({display:"none",height:"auto",opacity:1})})},yoodoo.dooit_standardize=function(obj){"undefined"==typeof obj&&(obj={});var standard={containers:{},value:null,key:null,globalkey:null,outFields:{},fields:{},schema:{},words:{sample_key:{en:"Sample key in English",es:"Sample key in Spanish",fr:"Sample key in Spanish"}},init:function(){this.loadFields(),this.containers.container=void 0!==yoodoo.dooit?yoodoo.dooit.arena:$(".dooitDisplay"),void 0!==this.containers.container&&null!==this.containers.container&&("undefined"!=typeof infoSchema&&(this.schema=infoSchema),"object"==typeof this.schema.words&&null!==this.schema.words&&yoodoo.words.setOverrides(this.schema.words),this.start())},start:function(){},displayed:function(){void 0!==yoodoo.ui&&void 0!==yoodoo.ui.update&&yoodoo.ui.update(),yoodoo.metaphor<2&&$(this.containers.container).css({height:$("#yoodooScrolledArea").height()-8,"box-sizing":"border-box",border:"none"}),void 0!==this.schema&&"function"==typeof this.schema.ondisplay&&this.schema.ondisplay.apply(this,[])},loadFields:function(){if(yoodoo.words.setOverrides(this.words),void 0!==yoodoo.dooit){if(null===this.globalkey&&yoodoo.dooit.params.global_fields.length>0&&(this.globalkey=yoodoo.dooit.params.global_fields[0]),null!==this.globalkey&&(this.schema=yoodoo.dooit.params.fields[this.globalkey][1]),yoodoo.dooit.params.default_fields.length>1)for(var i=0;i<yoodoo.dooit.params.default_fields.length;i++){var k=yoodoo.dooit.params.default_fields[i];k!=this.globalkey&&(this.fields[k]=yoodoo.dooit.params.fields[k][1],this.outFields[k]=!0)}else null===this.key&&yoodoo.dooit.params.default_fields.length>0&&(this.key=yoodoo.dooit.params.default_fields[0]),null!==this.key&&(this.value=yoodoo.dooit.params.fields[this.key][1]);for(var k in yoodoo.dooit.params.fields)k!=this.key&&k!=this.globalkey&&this.outFields[k]!==!0&&(this.fields[k]=yoodoo.dooit.params.fields[k][1],this.outFields[k]=!1)}else{if(null===this.globalkey&&array_of_global_fields.length>0&&(this.globalkey=array_of_global_fields[0]),null!==this.globalkey&&void 0!==this.globalkey&&"undefined"!=typeof ui_questions&&""!=array_of_fields[this.globalkey][1])try{eval("ui_questions.schema="+array_of_fields[this.globalkey][1]+";")}catch(e){yoodoo.errorLog(e)}if(array_of_default_fields.length>1)for(var i=0;i<array_of_default_fields.length;i++){var k=array_of_default_fields[i];if(k!=this.globalkey){var tmp="";try{eval("tmp="+array_of_fields[k][1]+";")}catch(e){yoodoo.errorLog(e),tmp=array_of_fields[k][1]}this.fields[k]=tmp,this.outFields[k]=!0}}else if(null===this.key&&array_of_default_fields.length>0&&(this.key=array_of_default_fields[0]),null!==this.key&&void 0!==this.key&&"undefined"!=typeof ui_questions&&""!=array_of_fields[this.key][1])try{eval("ui_questions.value="+array_of_fields[this.key][1]+";")}catch(e){yoodoo.errorLog(e),ui_questions.value=array_of_fields[this.key][1]}for(var k in array_of_fields)if(k!=this.key&&k!=this.globalkey&&this.outFields[k]!==!0){var tmp="";try{eval("tmp="+array_of_fields[k][1]+";")}catch(e){yoodoo.errorLog(e),tmp=array_of_fields[k][1]}this.fields[k]=tmp,this.outFields[k]=!1}}},finishable:function(){return{canSave:!0,canComplete:!0,hilite:!0}},presave:function(){},output:function(){var a={};null!==this.key&&(void 0!==yoodoo.dooit?a["EF"+yoodoo.dooit.params.fields[this.key][0]]=yoodoo.json.encode(this.value):a["EF"+array_of_fields[this.key][0]]=dooit.json(this.value));for(var b in this.outFields)this.outFields[b]===!0&&(void 0!==yoodoo.dooit?a["EF"+yoodoo.dooit.params.fields[b][0]]="object"==typeof this.fields[b]?yoodoo.json.encode(this.fields[b]):this.fields[b]:a["EF"+array_of_fields[b][0]]="object"==typeof this.fields[b]?dooit.json(this.fields[b]):this.fields[b]);return a}};for(var k in standard)void 0===obj[k]&&(obj[k]=standard[k]);return obj},yoodoo.working=function(a){var b="";arguments.length>1&&(b=arguments[1]),a&&$(this.wait).empty().append($(yoodoo.e("div")).html(b).append($(yoodoo.e("div")).addClass("loading"))),a&&"none"==$(this.wait).css("display")?this.canHTML?$(this.wait).stop().css({opacity:0,scale:.8}).show().transition({opacity:1,scale:1},500,"snap"):$(this.wait).stop().fadeIn(200):a||"none"==$(this.wait).css("display")||(this.canHTML?$(this.wait).stop().transition({opacity:0,scale:.9},500,"snap",function(){$(this).hide()}):$(this.wait).stop().fadeOut(200)),a||null===this.container||"block"!=$(this.container).css("display")||this.clearFocus()},yoodoo.clearFocus=function(){if(void 0!==yoodoo.option.flashMovie&&yoodoo.option.flashMovie.loaded){window.focus();var a=swfobject.getObjectById(yoodoo.option.flashMovie.id);a&&(a.tabIndex=0,a.focus())}},yoodoo.fieldsUpdateCallbacks=[],yoodoo.updateFields=function(a,b){yoodoo.fieldsUpdateCallbacks.push(b);for(var c={callback:"yoodoo.updatedFields",cmd:"updateFields"},d=0;d<a.length;d++)c["field"+a[d][0]]=Base64.encode(a[d][1]);dooit.addTags.length>0&&(c.addtags=dooit.addTags.join(",")),dooit.removeTags.length>0&&(c.removetags=dooit.removeTags.join(",")),dooit.addTags=[],dooit.removeTags=[],yoodoo.sendPost(null,c)},yoodoo.updatedFields=function(a){/^\&lt\;/.test(a)&&yoodoo.gotXML(a);var b=yoodoo.fieldsUpdateCallbacks.shift();b(a)},yoodoo.toPDF=function(a){"object"!=typeof this.downloader&&(this.downloader=yoodoo.e("iframe"),this.widget.appendChild(this.downloader),$(this.downloader).css({display:"none"}));var b="";b+="<html><head></head><body><form id='yoodooPost' action='"+this.option.yoodooPortal.url+"' method='POST'>",b+="<textarea name='pdf'>"+Base64.encode(dooit.json(a))+"</textarea>",b+="<textarea name='userhash'>"+this.loginCode+"</textarea>",b+="<textarea name='sitehash'>"+this.sitehash+"</textarea>",arguments.length>1&&(b+="<textarea name='filename'>"+arguments[1]+"</textarea>"),b+="<textarea name='cmd'>pdf</textarea>",b+="</form>",b+="<script type='text/javascript'>document.getElementById('yoodooPost').submit();</script>",b+="</body></html>";var c=this.downloader.contentWindow?this.downloader.contentWindow:this.downloader.contentDocument.document?this.downloader.contentDocument.document:this.downloader.contentDocument;c.document.open(),c.document.write(b),c.document.close()},yoodoo.fillPDF=function(a){"object"!=typeof this.downloader&&(this.downloader=yoodoo.e("iframe"),this.widget.appendChild(this.downloader),$(this.downloader).css({display:"none"}));var b="";b+="<html><head></head><body><form id='yoodooPost' action='"+this.option.yoodooPortal.url+"' method='POST'>",b+="<textarea name='userhash'>"+this.loginCode+"</textarea>",b+="<textarea name='sitehash'>"+this.sitehash+"</textarea>",b+="<textarea name='cmd'>fill_pdf</textarea>";for(var c in a)console.log(c),"object"==typeof a[c]?console.log("object:"+dooit.json(a[c])):console.log("srting:"+a[c]),b+="<textarea name='"+c+"'>"+("object"==typeof a[c]?Base64.encode(dooit.json(a[c])):a[c])+"</textarea>";b+="</form>",b+="<script type='text/javascript'>document.getElementById('yoodooPost').submit();</script>",b+="</body></html>";var d=this.downloader.contentWindow?this.downloader.contentWindow:this.downloader.contentDocument.document?this.downloader.contentDocument.document:this.downloader.contentDocument;d.document.open(),d.document.write(b),d.document.close()},yoodoo.lastReplyFrame=null,yoodoo.translateXML=function(a){var b=this.option.yoodooPortal.url+"?userhash="+this.loginCode+"&sitehash="+this.sitehash;a=a.replace(/<ru>/g,b);for(var c in this.xmltranslation){var d=new RegExp("<"+this.xmltranslation[c],"g"),e=new RegExp("</"+this.xmltranslation[c],"g");a=a.replace(d,"<"+c),a=a.replace(e,"</"+c)}return a},yoodoo.initPostResponder=function(){window.attachEvent?window.attachEvent("onmessage",yoodoo.postReply):window.addEventListener("message",yoodoo.postReply,!1)},yoodoo.removePostResponder=function(){window.detachEvent?window.detachEvent("onmessage",yoodoo.postReply):window.removeEventListener("message",yoodoo.postReply,!1)},yoodoo.flashReady=function(){yoodoo.option.flashMovie.loaded=!0,yoodoo.checkFlashLoaded()},yoodoo.checkFlashLoaded=function(){yoodoo.option.flashMovie.loaded&&yoodoo.loggedin&&yoodoo.callXML()},yoodoo.decodeHTMLResponse=function(a){return a=a.replace(/[\n\r]/g,""),a=a.replace(/&lt;/g,"<"),a=a.replace(/&gt;/g,">"),a=a.replace(/&amp;/g,"&")},yoodoo.specialDecodeResponse=function(a){return a=a.replace(/&dq;/g,'"'),a=a.replace(/&sq;/g,"'")},yoodoo.secsToMins=function(a){var b=Math.floor(a/60),c=Math.floor(a-60*b).toString();1==c.length&&(c="0"+c);var d=a.toFixed(1).split(".");return b+":"+c+"."+d[1]},yoodoo.hasTag=function(a){if(void 0!=this.bookcase){if(void 0!=this.bookcase.tags)for(var b=0;b<this.bookcase.tags.length;b++){if(isNaN(a)&&this.bookcase.tags[b].name==a)return!0;if(this.bookcase.tags[b].id==a)return!0}}else if("object"==typeof this.sessions&&void 0!=this.sessions._tags)for(var b=0;b<this.sessions._tags.length;b++)if(this.sessions._tags[b]==a)return!0;return!1},yoodoo.timecode=function(a){if("string"!=typeof a||!a instanceof String)return 0;for(var b=0,c=0,d=a.split(":");d.length>0;)b+=Math.pow(60,c++)*parseInt(d.pop());return b},yoodoo.getStatus=function(){var a={cmd:yoodoo.cmd.status.server,callback:"yoodoo."+yoodoo.cmd.status.callback};yoodoo.sendPost(null,a)},yoodoo.removeDooitDependencies=function(){if(void 0!=dooit.destroy)try{dooit.destroy()}catch(a){yoodoo.errorLog(a)}void 0!=dooit&&(dooit.removeTemporaries(),null!==yoodoo.dooitFiles&&yoodoo.dooitFiles.removeFiles(),yoodoo.dooitFiles=null)},yoodoo.togo=function(a){var b=(new Date).getTime()/1e3,c=a.getTime()/1e3,d=Math.round(c-b);return d>0?120>d?d+" "+yoodoo.w("second"+(1==d?"":"s")):(d=Math.floor(d/60),120>d?d+" "+yoodoo.w("minute"+(1==d?"":"s")):(d=Math.floor(d/60),120>d?d+" "+yoodoo.w("hour"+(1==d?"":"s")):(d=Math.floor(d/24),14>d?d+" "+yoodoo.w("day"+(1==d?"":"s")):(d=Math.floor(d/7),d+" "+yoodoo.w("week"+(1==d?"":"s")))))):!1},yoodoo.ago=function(a){if(!(a instanceof Date))return"";var b=!1;arguments.length>1&&(b=arguments[0]);var c=a>new Date,d=(new Date).getTime()/1e3,e=a.getTime()/1e3,f=d-e;c&&(f=e-d);var g=60,h=60*g,i=24*h,j=7*i,k=30.42*i;if(b&&!c){if(g>f)return yoodoo.w("justnow");if(h>f)return yoodoo.w("thishour");if(i>f)return yoodoo.w("today");if(j>f)return yoodoo.w("thisweek");if(k>f)return yoodoo.w("thismonth");var l=Math.floor(f/k);return 1==l?yoodoo.w("lastmonth"):yoodoo.w("nmonthsago",{n:l})}var m=0,n="minute";return g>f?yoodoo.w("justnow"):(h>f?m=Math.floor(f/g):i>f?(m=Math.floor(f/h),n="hour"):j>f?(m=Math.floor(f/i),n="day"):(m=Math.floor(f/j),n="week"),1==m?c?yoodoo.w("ina"+n):yoodoo.w("a"+n+"ago"):c?yoodoo.w("innum"+n+"s",{n:m}):yoodoo.w("n"+n+"sago",{n:m}))},yoodoo.playSound=function(a){yoodoo.stopVoiceover(),yoodoo.voiceFinishedCallback=function(){},arguments.length>1&&(yoodoo.voiceFinishedCallback=arguments[1]),yoodoo.stopSound(),this.html5?"undefined"!=typeof yoodooPlaya?yoodooPlaya.audio.loadAndPlay(a,{onComplete:yoodoo.voiceFinished}):yoodoo.audio.loadAndPlay(a,{onComplete:yoodoo.voiceFinished}):swfobject.getObjectById(yoodoo.option.voiceoverMovie.id).loadAndPlay(a)},yoodoo.stopSound=function(){clearTimeout(yoodoo.voiceovertimer),this.html5?"undefined"!=typeof yoodooPlaya?yoodooPlaya.audio.pause():yoodoo.audio.pause():swfobject.getObjectById(yoodoo.option.voiceoverMovie.id).PauseVoiceover("")},yoodoo.startVoiceover=function(a){return yoodoo.voiceFinishedCallback=function(){},""!=yoodoo.voiceoverfile&&(a||this.playVoice)?this.html5?("undefined"!=typeof yoodooPlaya?yoodooPlaya.audio.loadAndPlay(yoodoo.voiceoverfile,{onComplete:yoodoo.voiceFinishedCallback}):yoodoo.audio.loadAndPlay(yoodoo.voiceoverfile,{onComplete:yoodoo.voiceFinishedCallback}),!0):(swfobject.getObjectById(yoodoo.option.voiceoverMovie.id).loadAndPlay(yoodoo.voiceoverfile),this.checkVoiceTimer=setTimeout("yoodoo.checkVoiceProgress();",500),!0):!1},yoodoo.stopVoiceover=function(){return clearTimeout(yoodoo.voiceovertimer),$("#voiceoverbutton").removeClass("isPlaying"),this.html5?("undefined"!=typeof yoodooPlaya?yoodooPlaya.audio.pause():yoodoo.audio.pause(),!0):(clearTimeout(yoodoo.checkVoiceTimer),swfobject.getObjectById(yoodoo.option.voiceoverMovie.id).PauseVoiceover(""),!0)},yoodoo.voiceoverStartStop=function(a){this.playVoice=!this.playVoice,this.playVoice?(this.playVoice=yoodoo.startVoiceover(!0),$(a).addClass("isPlaying")):yoodoo.stopVoiceover(!0)},yoodoo.checkVoiceTimer=null,yoodoo.checkVoiceProgress=function(){if(arguments.length>0){var a=arguments[0];$(yoodoo.container).find(".overlayFooter.liveDooit #voiceoverbutton .progress .bar").css("width",Math.round(a.progress)+"%")}else if(this.playVoice){var b=swfobject.getObjectById(yoodoo.option.voiceoverMovie.id).playHead();b>1&&(b=1),$(this.container).find(".overlayFooter.liveDooit #voiceoverbutton .progress .bar").css("width",Math.round(100*b)+"%"),this.checkVoiceTimer=setTimeout("yoodoo.checkVoiceProgress();",500)}},yoodoo.voiceFinishedCallback=function(){},yoodoo.voiceFinished=function(){yoodoo.console("Voiceover finished"),yoodoo.playVoice=!1,$(yoodoo.container).find(".overlayFooter.liveDooit #voiceoverbutton").removeClass("isPlaying"),yoodoo.voiceFinishedCallback()},yoodoo.runInitThis=function(){void 0!==this.initThisParams?setTimeout(function(){dooit.init(yoodoo.initThisParams)},400):setTimeout(function(){"undefined"!=typeof initThis&&initThis()},400)},yoodoo.utc=function(){var a=new Date;return a.setMinutes(a.getMinutes()+a.getTimezoneOffset()),a.getFullYear()+"-"+this.doubleNumberLength(a.getMonth()+1)+"-"+this.doubleNumberLength(a.getDate())+" "+this.doubleNumberLength(a.getHours())+":"+this.doubleNumberLength(a.getMinutes())+":"+this.doubleNumberLength(a.getSeconds())},yoodoo.utcToLocal=function(a){return a.setMinutes(a.getMinutes()-a.getTimezoneOffset()),a},yoodoo.doubleNumberLength=function(a){for(a=String(a);a.length<2;)a="0"+a;return a},yoodoo.makeButton=function(){var a='javascript:yoodoo.login("'+yoodoo.user.username+'","'+yoodoo.user.password+'")',b=yoodoo.e("a");b.href=a,$(b).html("Yoodoo auto login"),document.body.appendChild(b)},yoodoo.loginValidate=function(){var a={cmd:"home",callback:"yoodoo."+yoodoo.cmd.login.callback};yoodoo.sendPost(null,a)},yoodoo.login=function(a,b){yoodoo["interface"].showDialog(yoodoo.w("attemptinglogin")+yoodoo.w("_attempting_login")),yoodoo.user.username=a,yoodoo.username=a,yoodoo.user.password=b;var c={cmd:yoodoo.cmd.login.server,username:escape(a),password:escape(b),callback:"yoodoo."+yoodoo.cmd.login.callback};yoodoo.sendPost(null,c),yoodoo.events.trigger("login",a)},yoodoo.replyValues=function(reply){yoodoo.words.setOverrides(reply.words),yoodoo.first_login=reply.first,yoodoo.introMovie=reply.initialVideo,void 0!==yoodoo.option.introMovie&&(yoodoo.option.introMovie.flashvars.intro=reply.initialVideo),yoodoo.user.emailaddress=reply.emailaddress,yoodoo.user.username=reply.username,yoodoo.user.firstname=reply.firstname,
yoodoo.user.lastname=reply.lastname,yoodoo.user.nickname=reply.nickname,yoodoo.user.facebook=reply.facebook===!0,yoodoo.user.avatar="imagedomain:"+reply.avatar,yoodoo.user.managerType=void 0===reply.managerType?null:reply.managerType,void 0!==reply.smallAvatar&&(yoodoo.user.smallAvatar="imagedomain:"+reply.smallAvatar),void 0!==reply.largeAvatar&&(yoodoo.user.largeAvatar="imagedomain:"+reply.largeAvatar);var protocol=/^https\:/i.test(yoodoo.option.baseUrl)?"https://":"http://";if(yoodoo.option.contentUrl=protocol+reply.contentUrl,yoodoo.option.videoUrl=protocol+reply.videoUrl,yoodoo.option.audioUrl=protocol+reply.audioUrl,yoodoo.option.imageUrl=protocol+reply.imageUrl,yoodoo.user.unreadComments=reply.unreadComments,yoodoo.user.staff=reply.staff,yoodoo.user.groups=reply.groups,yoodoo.home_banner_html=reply.banner,yoodoo.user.score=reply.score,yoodoo.home_screen_title=yoodoo.w("welcome_title"),yoodoo.username=yoodoo.w("welcome_title"),yoodoo.flash_message=yoodoo.w("welcome_text"),yoodoo.home_left_text=Base64.decode(reply.tip),""==yoodoo.home_left_text?yoodoo.home_left_text=yoodoo.w("tip_title")+yoodoo.w("default_tip"):yoodoo.home_left_text=yoodoo.w("tip_title")+yoodoo.home_left_text,yoodoo.notices=[],void 0!==yoodoo.notification)for(var n=0;n<reply.notices.length;n++)yoodoo.notices.push(new yoodoo.notification.notice(reply.notices[n]));else yoodoo.notices=reply.notices;if(void 0!==reply.serverTime)try{eval("var tmpTime="+reply.serverTime+";"),yoodoo.serverTimeOffset=(new Date).getTime()-tmpTime.getTime()}catch(e){yoodoo.errorLog(e)}yoodoo.user.meta=null===reply.meta?{}:reply.meta,yoodoo.user.advisorAcceptance=reply.advisorAcceptance,yoodoo.user.advisorRestricted=reply.advisorRestricted,yoodoo.user.advisor=reply.advisor,yoodoo.user.advised=reply.advised,yoodoo.user.adviseeUnread=reply.adviseeUnread,yoodoo.user.adviseeRequests=reply.adviseeRequests,yoodoo.user.advisorUnread=reply.advisorUnread,"undefined"!=typeof reply.resourceUrl&&(yoodoo.option.resourceUrl=reply.resourceUrl),"undefined"!=typeof reply.htmlResourceUrl&&(yoodoo.option.htmlResourceUrl=reply.htmlResourceUrl),yoodoo.user.advisorUnread=reply.advisorUnread,yoodoo.user.metaUpdate={},yoodoo.events.trigger("userInformation",yoodoo.user),yoodoo.loggedin=!0,yoodoo.comments.updateUnreadComments(),"object"==typeof yoodoo.sessions&&void 0!==reply.icons&&(yoodoo.icons.custom=reply.icons),"object"==typeof yoodoo.sessions&&void 0!==reply.tags&&(yoodoo.sessions._tags=reply.tags),"object"==typeof yoodoo.sessions&&void 0!==reply.sessions&&yoodoo.sessions.build(reply.sessions),"object"==typeof yoodoo.sessions&&void 0!==reply.syllabus&&yoodoo.sessions.syllabus(reply.syllabus),yoodoo.user.staff&&!yoodoo.isApp&&yoodoo.debuggerz.start(),yoodoo.debuggerz.showMeta(yoodoo.user.meta)},yoodoo.trigger_list=[],yoodoo.set_trigger=function(a){this.trigger_list.push(Base64.encode(dooit.json(a)))},yoodoo.set_meta=function(a,b){void 0==yoodoo.user.meta&&(yoodoo.user.meta={}),void 0==yoodoo.user.metaUpdate&&(yoodoo.user.metaUpdate={}),(void 0==yoodoo.user.meta[a]||yoodoo.user.meta[a]!=b)&&(yoodoo.user.meta[a]=b,yoodoo.user.metaUpdate[a]=b,yoodoo.events.trigger("meta",{key:a,value:b}),yoodoo.debuggerz.setMeta(a,b))},yoodoo.get_meta=function(a){return void 0==yoodoo.user.meta[a]?null:yoodoo.user.meta[a]},yoodoo.changed_meta=function(){var a={};for(var b in yoodoo.user.metaUpdate)a[b]=yoodoo.user.metaUpdate[b];return yoodoo.user.metaUpdate={},a},yoodoo.set_users_totals=function(a,b,c,d){void 0==yoodoo.user.users_totals&&(yoodoo.user.users_totals={}),yoodoo.user.users_totals[a]=b+","+c+","+(d?"1":"0")},yoodoo.changed_users_totals=function(){var a={};for(var b in yoodoo.user.users_totals)a[b]=yoodoo.user.users_totals[b];return yoodoo.user.users_totals={},a},yoodoo.debuggerz={container:null,display:null,tags:null,meta:null,getAllItems:!1,lists:{tags:{},meta:{},post:[]},start:function(){if(void 0!==this.container&&null===this.container){this.container=yoodoo.e("div"),this.display=yoodoo.e("div"),this.tags=yoodoo.e("div"),this.meta=yoodoo.e("div"),this.post=yoodoo.e("div"),$(this.container).addClass("yoodoo_debugger");var a=yoodoo.e("label");$(a).html("Load all content");var b=yoodoo.e("input");$(a).append($(b).attr("type","checkbox").bind("change",function(){yoodoo.debuggerz.getAllItems=this.checked,yoodoo.debuggerz.reloadBookcase()}));var c=yoodoo.e("button");$(this.container).append($(c).attr("type","button").html("close debugger").click(function(){yoodoo.debuggerz.close()})).append(a).append(this.display).append("<div>Tags</div>").append($(this.tags).addClass("tag_debug")).append("<div>Meta</div>").append($(this.meta).addClass("meta_debug")).append("<div>Posts</div>").append($(this.post).addClass("post_debug")),$(document.body).append(this.container)}},reloadBookcase:function(){yoodoo.callXML()},close:function(){$(this.container).remove(),this.container=void 0,yoodoo.debuggerz.getAllItems&&(yoodoo.debuggerz.getAllItems=!1,yoodoo.debuggerz.reloadBookcase())},showMeta:function(a){if(void 0!==this.container&&null!==this.container){for(var b in a)if(void 0===this.lists.meta[b]||void 0===this.lists.meta[b].element){var c=a[b];c.length>15?(c=c.substring(0,15),c=c.replace(/\&/g,"&amp;"),c+="&hellip;",c=c.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")):c=c.replace(/\&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;"),this.lists.meta[b]={value:c,cache:!1,element:yoodoo.e("div")},$(this.meta).append($(this.lists.meta[b].element).html(b+": "+this.lists.meta[b].value).hide()),$(this.lists.meta[b].element).slideDown()}else this.lists.meta[b].element.cache=!1,$(this.lists.meta[b].element).removeClass("cachedMeta");for(var b in this.lists.meta)void 0!==this.lists.meta[b]&&void 0===a[b]&&($(this.lists.meta[b].element).slideUp(500,function(){$(this).remove()}),this.lists.meta[b]=void 0)}},showTags:function(a){if(void 0!==this.container&&null!==this.container){for(var b={},c=0;c<a.length;c++){var d=a[c].name;b[d]=!0,void 0===this.lists.tags[d]?(this.lists.tags[d]={live:!0,cache:null,element:yoodoo.e("div")},$(this.tags).append($(this.lists.tags[d].element).html(d).hide()),$(this.lists.tags[d].element).slideDown()):(this.lists.tags[d].cache=null,this.lists.tags[d].live=!0,$(this.lists.tags[d].element).removeClass("removeTag").removeClass("addTag"))}for(var d in this.lists.tags)void 0===b[d]&&(void 0!==this.lists.tags[d]&&$(this.lists.tags[d].element).slideUp(500,function(){$(this).remove()}),this.lists.tags[d]=void 0)}},addTag:function(a){void 0===this.lists.tags[a]?(this.lists.tags[a]={cache:!0,element:yoodoo.e("div")},$(this.tags).append($(this.lists.tags[a].element).html(a).addClass("addTag").hide()),$(this.lists.tags[a].element).slideDown()):this.lists.tags[a].cache===!1&&(this.lists.tags[a].cache=null,$(this.lists.tags[a].element).removeClass("removeTag"),this.lists.tags[a].live!==!0&&(this.lists.tags[a].cache=!0,$(this.lists.tags[a].element).addClass("addTag")))},removeTag:function(a){void 0!==this.lists.tags[a]&&(this.lists.tags[a].live===!0?(this.lists.tags[a].cache=!1,$(this.lists.tags[a].element).addClass("removeTag").removeClass("addTag")):($(this.lists.tags[a].element).remove(),this.lists.tags[a]=void 0))},setMeta:function(a,b){b.length>15?(b=b.substring(0,15),b=b.replace(/\&/g,"&amp;"),b+="&hellip;",b=b.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")):b=b.replace(/\&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;"),void 0===this.lists.meta[a]?(this.lists.meta[a]={value:b,cache:!0,element:yoodoo.e("div")},$(this.meta).append($(this.lists.meta[a].element).html(a+": "+this.lists.meta[a].value).hide()),$(this.lists.meta[a].element).slideDown(),$(this.lists.meta[a].element).addClass("cachedMeta")):this.lists.meta[a].value!=b&&(this.lists.meta[a].value=b,this.lists.meta[a].element.cache=!0,$(this.lists.meta[a].element).html(a+": "+this.lists.meta[a].value),$(this.lists.meta[a].element).addClass("cachedMeta"))},lastPost:null,lastPostTimestamp:0,sendpost:function(a){for(this.lastPost=yoodoo.e("div"),$(this.lastPost).html(a),$(this.post).prepend(this.lastPost),this.lists.post.push(this.lastPost);this.lists.post.length>10;){var b=this.lists.post.splice(0,1);$(b[0]).remove()}this.lastPostTimestamp=(new Date).getTime()},receivedpost:function(){var a=yoodoo.e("em"),b=(new Date).getTime()-this.lastPostTimestamp;$(this.lastPost).append($(a).html("&nbsp;("+b+"ms)"))}},yoodoo.download=function(a,b){yoodoo.console(b),window.open(b,"yoodoo_download"),this.bookcase.handlers.document_requested(a)},yoodoo.keyCodes={standard:{backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,capslock:20,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,del:46,zero:48,nine:57,padzero:96,padnine:105,a:65,z:90,f1:112,f12:123,numlock:144,scrolllock:145,comma:188,period:190,padperiod:110,slash:191,padslash:111,leftbracket:219,backslash:220,rightbracket:221,apostrophe:222,dash:189,paddash:109,tilde:192,padplus:107,padasterix:106,equals:187,leftquote:223,semicolon:186},keypress:{backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,capslock:20,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,del:46,zero:48,nine:57,padzero:96,padnine:105,a:65,z:90,A:97,Z:122,f1:112,f12:123,numlock:144,scrolllock:145,comma:188,period:46,padperiod:110,slash:191,padslash:111,leftbracket:219,backslash:220,rightbracket:221,apostrophe:222,dash:45,paddash:109,tilde:192,padplus:107,padasterix:106,equals:187,leftquote:223,semicolon:186}},yoodoo.keyCode=function(a){var b=yoodoo.keyCodes.standard;"keypress"==a.type&&(b=yoodoo.keyCodes.keypress);var c;window.event?c=window.event.keyCode:a&&(c=a.which);var d=yoodooKeylog[b.shift]===!0||a.shiftKey===!0,e=yoodooKeylog[b.ctrl]===!0||a.ctrlKey===!0,f={code:c,alpha:!e&&c>=b.a&&c<=b.z,space:c==b.space,numeric:!e&&!d&&(c>=b.zero&&c<=b.nine||c>=b.padzero&&c<=b.padnine),decimal:!e&&!d&&(c>=b.zero&&c<=b.nine||c>=b.padzero&&c<=b.padnine)||c==b.padperiod||c==b.period||c==b.dash||c==b.paddash,enter:c==b.enter,escape:c==b.esc,character:String.fromCharCode(c),input:c==b.period||c==b.comma||c==b.tilde||c==b.slash||c==b.padperiod||c==b.padtilde||c==b.padslash||c==b.padplus||c==b.equals||c==b.dash||c==b.padasterix||c==b.padperiod||c==b.backslash||c==b.leftquote||c==b.apostrophe||c==b.rightbracket||c==b.leftbracket||c==b.semicolon,tab:c==b.tab,shift:d,onlyshift:d&&c==b.shift,ctrl:e,onlyctrl:e&&c==b.ctrl,backspace:c==b.backspace,del:c==b.del,fkey:c>=b.f1&&c<=b.f12?c-b.f1+1:!1,home:c==b.home,end:c==b.end,up:c==b.up,down:c==b.down,left:c==b.left,right:c==b.right,navigate:!1};for(var g in b)f[g]=c==b[g];return f.character=String.fromCharCode(c),f.navigate=f.left||f.right||f.del||f.backspace||f.onlyshift||f.home||f.end||f.tab,f},yoodoo.htmlEntities=function(a){return String(a).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/&/g,"&amp;")},yoodoo.outerhtml=function(a){var b=$(yoodoo.e("div")).append(a);return b.html()},yoodoo.sliders=[],yoodoo.initSlider=function(a,b,c){if(void 0==a.sliderIndex)for(var d=0;d<this.sliders.length;d++)this.sliders[d]==a&&(a.sliderIndex=d);void 0==a.sliderIndex&&(this.sliders.push(a),a.sliderIndex=this.sliders.length-1);var e=null,f=!0;a.useMargin=!1,a.persist=!0,a.canPersist=!1,a.slideTarget=b,a.physics={speed:0,x:0,time:0,dtime:0,friction:400,interval:20},a.scrollTo=function(){},a.stop=function(){},a.change=function(){},a.childScroll=null,void 0!=c.horizontal&&(f=c.horizontal),void 0!=c.useMargin&&(a.useMargin=c.useMargin),void 0!=c.persist&&(a.persist=c.persist),void 0!=c.friction&&(a.physics.friction=c.friction),void 0!=c.items&&(e=$(a).find(c.items)),void 0!=c.stop&&(a.stop=c.stop),void 0!=c.change&&(a.change=c.change),a.direction=f?"X":"Y",f?$(a).bind("mousewheel",function(a){this.setScroll(this.scrollamount-a.originalEvent.wheelDeltaX)}):$(a).bind("mousewheel",function(a){this.setScroll(this.scrollamount-a.originalEvent.wheelDeltaY)}),null!=e&&(e.each(function(b,c){c.sliderContainer=a}),yoodoo.is_touch&&e.unbind("touchstart").bind("touchstart",function(a){1==a.originalEvent.touches.length&&($(this.sliderContainer).stop(),a.preventDefault(),this.direction=this.sliderContainer.direction?"X":"Y",this.X=a.originalEvent.touches[0]["page"+this.direction],yoodoo.sliderItemOver=this,$(window).bind("touchmove.itemTemp",function(a){Math.sqrt(Math.pow(yoodoo.sliderItemOver.X-a.originalEvent.touches[0]["page"+yoodoo.sliderItemOver.sliderContainer.direction],2))>5&&($(window).unbind("touchmove.itemTemp"),$(window).unbind("touchend.itemTemp"))}),$(window).bind("touchend.itemTemp",function(a){$(window).unbind("touchmove.itemTemp"),$(window).unbind("touchend.itemTemp"),void 0!==yoodoo.sliderItemOver.selected&&yoodoo.sliderItemOver.selected(a)}))}),yoodoo.is_mouse&&e.unbind("mousedown").bind("mousedown",function(a){a.preventDefault(),this.direction=this.sliderContainer.direction?"X":"Y",this.X=a["page"+this.direction],yoodoo.sliderItemOver=this,$(document).bind("mouseup.itemTemp mouseleave.itemTemp",function(a){$(document).unbind("mouseup.itemTemp"),$(document).unbind("mouseleave.itemTemp"),Math.sqrt(Math.pow(yoodoo.sliderItemOver.X-a["page"+yoodoo.sliderItemOver.direction],2))<5?void 0!==yoodoo.sliderItemOver.selected&&yoodoo.sliderItemOver.selected(a):a.preventDefault()})})),a.isActive=function(){var a=$(this.slideTarget).outerWidth(!1),b=$(this.slideTarget).outerHeight(!1);return $(this).width()<a&&"X"==this.direction||$(this).height()<b&&"Y"==this.direction},a.persisting=function(){if(this.persist&&this.canPersist){var b=this.physics.interval*this.physics.friction/1e3;this.physics.speed>0?this.physics.speed-=b:this.physics.speed+=b;var c=this.physics.speed*this.physics.interval/1e3,d=this.scrollamount;this.setScroll(this.scrollamount+(this.useMargin?-c:c)),c=this.scrollamount-d,2>c&&c>-2?(this.physics.speed=0,this.stop()):setTimeout("yoodoo.sliders["+a.sliderIndex+"].persisting()",this.physics.interval),this.change()}else this.stop()},a.startScroll=function(){if(this.isActive){if(this.useMargin){var a="margin"+("X"==this.direction?"Left":"Top"),b=parseInt($(this.slideTarget).css(a).replace("px",""));this.scrollamount=b}else this.scrollamount=this["scroll"+("X"==this.direction?"Left":"Top")];return"Y"==this.direction?this.maxScroll=$(this.slideTarget).outerHeight(!1)-$(this).height():this.maxScroll=$(this.slideTarget).outerWidth(!1)-$(this).width(),!0}return!1},a.scrollTo=function(a){if(void 0!==a){var b=function(){};if(arguments.length>1&&(b=arguments[1]),this.startScroll(),"X"==this.direction){var c=$(a).offset().left-$(this.slideTarget).offset().left+$(a).outerWidth(!0)/2-$(this).width()/2;this.setScroll(this.useMargin?-c:c,!0,b)}else{var d=$(a).offset().top-$(this.slideTarget).offset().top+$(a).outerHeight(!0)/2-$(this).height()/2;this.setScroll(this.useMargin?-d:d,!0,b)}}},a.setScroll=function(a){var b=!1;arguments.length>1&&(b=arguments[1]);var c=function(){};if(arguments.length>2&&(c=arguments[2]),this.scrollamount=a,this.useMargin){var d=[0,0,0,0];this.scrollamount<-this.maxScroll&&(this.scrollamount=-this.maxScroll),this.scrollamount>0&&(this.scrollamount=0),d["X"==this.direction?3:0]=this.scrollamount,b?$(this.slideTarget).animate({margin:d.join("px ")+"px"},{duration:500,easing:"swing",complete:c}):$(this.slideTarget).css({margin:d.join("px ")+"px"})}else{this.scrollamount>this.maxScroll&&(this.scrollamount=this.maxScroll),this.scrollamount<0&&(this.scrollamount=0);var e="scroll"+("X"==this.direction?"Left":"Top"),f={};f[e]=this.scrollamount,b?$(this).animate(f,{duration:500,easing:"swing",complete:c}):this[e]=this.scrollamount}this.change()},yoodoo.is_touch&&$(a).unbind("touchstart").bind("touchstart",function(a){if(1==a.originalEvent.touches.length){if($(this).stop(),"undefined"!=typeof yoodooPlaya&&yoodooPlaya.centreTimerClear(),$(a.target).hasClass("interactive"))return!0;if(this.physics.time=(new Date).getTime(),this.physics.speed=0,this.physics.x=a.originalEvent.touches[0]["page"+this.direction],this.lastLocation={x:a.originalEvent.touches[0].pageX,y:a.originalEvent.touches[0].pageY},this.childScroll=a.target,this.childScroll!=this)for(;!$(this.childScroll).hasClass("scrollStyle")&&this.childScroll!=this;)this.childScroll=this.childScroll.parentNode;$(this.childScroll).hasClass("scrollStyle")||(this.childScroll=null),this.canPersist=!1,this.startScroll()&&($(this).bind("touchmove",function(a){a.preventDefault();var b=(new Date).getTime();this.physics.dtime=b-this.physics.time,this.physics.time=b,this.physics.speed=(this.physics.x-a.originalEvent.touches[0]["page"+this.direction])/(this.physics.dtime/1e3),this.useMargin?this.setScroll(this.scrollamount-(this.physics.x-a.originalEvent.touches[0]["page"+this.direction])):this.setScroll(this.scrollamount+(this.physics.x-a.originalEvent.touches[0]["page"+this.direction])),this.physics.x=a.originalEvent.touches[0]["page"+this.direction],null!==this.childScroll&&(this.childScroll.scrollTop-=a.originalEvent.touches[0].pageY-this.lastLocation.y,this.childScroll.scrollLeft-=a.originalEvent.touches[0].pageX-this.lastLocation.x),this.lastLocation={x:a.originalEvent.touches[0].pageX,y:a.originalEvent.touches[0].pageY}}),$(this).bind("touchend",function(a){$(this).unbind("touchmove touchend"),this.canPersist=!0,this.persisting()}))}}),yoodoo.is_mouse&&$(a).unbind("mousedown").bind("mousedown",function(a){if("SELECT"==a.target.tagName)return!0;if($(this).unbind("mousemove mouseup mouseleave"),"undefined"!=typeof yoodooPlaya&&yoodooPlaya.centreTimerClear(),$(a.target).hasClass("interactive"))return!0;if(a.preventDefault(),this.physics.speed=0,this.physics.time=(new Date).getTime(),this.physics.x=a["page"+this.direction],this.lastLocation={x:a.pageX,y:a.pageY},this.startLocation=this.physics.x,this.childScroll=a.target,this.childScroll!=this)for(;!$(this.childScroll).hasClass("scrollStyle")&&this.childScroll!=this;)this.childScroll=this.childScroll.parentNode;$(this.childScroll).hasClass("scrollStyle")||(this.childScroll=null),this.canPersist=!1,this.startScroll()&&(null===this.childScroll||yoodoo.webkit||(this.childScroll.target=this,$(this).bind("mouseout",function(){this.canPersist=!0,$(this).unbind("mousemove mouseup mouseleave"),this.persisting()})),$(this).bind("mousemove",function(a){a.preventDefault();var b=(new Date).getTime();this.physics.dtime=b-this.physics.time,this.physics.time=b,this.physics.speed=(this.physics.x-a["page"+this.direction])/(this.physics.dtime/1e3),this.useMargin?this.setScroll(this.scrollamount-(this.physics.x-a["page"+this.direction])):this.setScroll(this.scrollamount+(this.physics.x-a["page"+this.direction])),this.physics.x=a["page"+this.direction],null!==this.childScroll&&(this.childScroll.scrollTop-=a.pageY-this.lastLocation.y,this.childScroll.scrollLeft-=a.pageX-this.lastLocation.x),this.lastLocation={x:a.pageX,y:a.pageY}}),$(this).bind("mouseup mouseleave",function(a){var b=Math.sqrt(Math.pow(this.startLocation-a["page"+this.direction],2));if(this.canPersist=!0,$(this).unbind("mousemove mouseup mouseleave"),b>5){var c=yoodoo.parentOfType(a.target,["a","button"]);if(c!==!1){var d=jQuery._data(c,"events"),e=[];if(d&&d.click){for(var f=0;f<d.click.length;f++)e.push(d.click[f].handler);$(c).unbind("click"),setTimeout(function(){for(var a=0;a<e.length;a++)$(c).click(e[a])},200)}}}this.persisting()}))})},yoodoo.parentOfType=function(a,b){for(var c={},d=[];b.length>0;){var e=b.pop();e.match(/^\./)?d.push(e.replace(/^\./,"")):c[e.toLowerCase()]=!0}for(;c[a.tagName.toLowerCase()]!==!0&&yoodoo.hasClassIn(a,d)!==!0&&"yoodooWidget"!=a.id;)a=a.parentNode;return"yoodooWidget"==a.id?!1:a},yoodoo.parentWithScroll=function(a){return a===yoodoo.widget?!1:a.scrollHeight>a.clientHeight&&"auto"==$(a).css("overflow-y")?a:yoodoo.parentWithScroll(a.parentNode)},yoodoo.hasClassIn=function(a,b){for(var c in b)if($(a).hasClass(b[c]))return!0;return!1},yoodoo.stringToDate=function(a,b){for(var c=new Date,d=c.getDate(),e=c.getMonth(),f=c.getFullYear(),g=c.getHours(),h=c.getMinutes(),i=c.getSeconds(),j=12>=g,k=0;k<a.length;k++){var l=a.substr(k,1);switch(l){case"d":var m=b.match(/^\d+/);m&&(d=m[0],b=b.replace(new RegExp("^"+m[0]),""));break;case"j":var m=b.match(/^\d+/);m&&(d=m[0],b=b.replace(new RegExp("^"+m[0]),""));break;case"D":for(var n="",o=0;o<this.days.length;o++)b.substr(0,3)==this.days[o].substr(0,3)&&(n=b.substr(0,3));""!=n&&(b=b.replace(new RegExp("^"+n),""));break;case"l":for(var n="",o=0;o<this.days.length;o++)b.substr(0,this.days[o].length)==this.days[o]&&(n=this.days[o]);""!=n&&(b=b.replace(new RegExp("^"+n),""));break;case"N":b=b.replace(/^\d/,"");break;case"S":b=b.replace(/^[st|nd|rd|th]/,"");break;case"w":b=b.replace(/^\d/,"");break;case"z":b=b.replace(/^\d{1,3}/,"");break;case"W":b=b.replace(/^\d{1,2}/,"");break;case"F":for(var n="",o=0;o<this.months.length;o++)b.substr(0,3)==this.months[o].substr(0,3)&&(n=b.substr(0,3));""!=n&&(b=b.replace(new RegExp("^"+n),""));break;case"M":for(var n="",o=0;o<this.months.length;o++)b.substr(0,this.months[o].length)==this.months[o]&&(n=this.months[o]);""!=n&&(b=b.replace(new RegExp("^"+n),""));break;case"m":var m=b.match(/^\d{1,2}/);m&&(e=m[0]-1,b=b.replace(new RegExp("^"+m[0]),""));break;case"n":var m=b.match(/^\d{1,2}/);m&&(e=m[0]-1,b=b.replace(new RegExp("^"+m[0]),""));break;case"t":b=b.replace(/^\d{1,2}/,"");break;case"Y":var m=b.match(/^\d{4}/);m&&(f=m[0],b=b.replace(new RegExp("^"+m[0]),""));break;case"y":var m=b.match(/^\d{2}/);m&&(f=f.substr(0,2)+m[0],b=b.replace(new RegExp("^"+m[0]),""));break;case"a":j="am"==b.substr(0,2),b=b.replace(/^\w\w/,"");break;case"A":j="AM"==b.substr(0,2),b=b.replace(/^\w\w/,"");break;case"g":var m=b.match(/^\d{1,2}/);m&&(g=1*m[0]+(j?12:0),b=b.replace(new RegExp("^"+m[0]),""));break;case"G":var m=b.match(/^\d{1,2}/);m&&(g=1*m[0],b=b.replace(new RegExp("^"+m[0]),""));break;case"h":var m=b.match(/^\d{1,2}/);m&&(g=1*m[0]+(j?12:0),b=b.replace(new RegExp("^"+m[0]),""));break;case"H":var m=b.match(/^\d{1,2}/);m&&(g=1*m[0],b=b.replace(new RegExp("^"+m[0]),""));break;case"i":var m=b.match(/^\d{1,2}/);m&&(h=1*m[0],b=b.replace(new RegExp("^"+m[0]),""));break;case"s":var m=b.match(/^\d{1,2}/);m&&(i=1*m[0],b=b.replace(new RegExp("^"+m[0]),""));break;default:b=b.substr(1,b.length-1)}}return new Date(f,e,d,g,h,i)},yoodoo.days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],yoodoo.months=["January","February","March","April","May","June","July","August","September","October","November","December"],yoodoo.formatDate=function(a,b){var c="";if("function"==typeof b.getDate){for(var d=b.getDate(),e=b.getMonth(),f=b.getFullYear().toString(),g=b.getHours(),h=b.getMinutes(),i=b.getSeconds(),j=new Date(b.getFullYear(),0,1),k=Math.ceil((b-j)/864e5),l=[],m=0;m<yoodoo.days.length;m++)l.push(yoodoo.w(yoodoo.days[m].toLowerCase()));for(var n=[],m=0;m<yoodoo.months.length;m++)n.push(yoodoo.w(yoodoo.months[m].toLowerCase()));var o=[31,28,31,30,31,30,31,31,30,31,30,31],p=f%4==0?f%100==0?f%400==0?!0:!1:!0:!1;p&&(o[1]=29);for(var q=[],r=0;31>r;r++)q[r]="th";q[0]=q[20]=q[30]="st",q[1]=q[21]="nd",q[2]=q[22]="rd";for(var r=0;r<a.length;r++){var s=a.substr(r,1);switch(s){case"d":c+=(1==d.toString().length?"0":"")+d.toString();break;case"D":c+=l[b.getDay()+0].substr(0,3);break;case"j":c+=d.toString();break;case"l":c+=l[b.getDay()];break;case"N":c+=0==b.getDay()?"7":b.getDay();break;case"S":"en"==yoodoo.words.language&&(c+=q[d-1]);break;case"w":c+=b.getDay();break;case"z":c+=k;break;case"W":c+=Math.ceil(k/7);break;case"F":c+=n[e];break;case"m":var t=e+1;c+=(1==t.toString().length?"0":"")+t.toString();break;case"M":c+=n[e].substr(0,3);break;case"n":var t=e+1;c+=t.toString();break;case"t":c+=o[e];break;case"L":c+=p;break;case"Y":c+=f.toString();break;case"y":c+=f.toString().substr(-2);break;case"a":c+=12>g?"am":"pm";break;case"A":c+=12>g?"AM":"PM";break;case"g":c+=g>12?g-12:g;break;case"G":c+=g;break;case"h":var u=g>12?g-12:g;c+=(1==u.toString().length?"0":"")+u;break;case"H":c+=(1==g.toString().length?"0":"")+g;break;case"i":c+=(1==h.toString().length?"0":"")+h;break;case"s":c+=(1==i.toString().length?"0":"")+i;break;default:c+=s}}}return c},yoodoo.readDate=function(a){return/^\d+\/\d+\/\d+ \d+\:\d+\:\d+$/.test(a)?this.stringToDate("Y/m/d H:i:s",a):/^\d+\/\d+\/\d+ \d+\:\d+$/.test(a)?this.stringToDate("Y/m/d H:i",a):/^\d+\/\d+\/\d+$/.test(a)?this.stringToDate("Y/m/d",a):/^\d+\-\d+\-\d+ \d+\:\d+\:\d+$/.test(a)?this.stringToDate("Y-m-d H:i:s",a):/^\d+\-\d+\-\d+ \d+\:\d+$/.test(a)?this.stringToDate("Y-m-d H:i",a):/^\d+\-\d+\-\d+$/.test(a)?this.stringToDate("Y-m-d",a):void 0},yoodoo.stringToDate=function(a,b){for(var c=new Date,d=c.getDate(),e=c.getMonth(),f=c.getFullYear(),g=c.getHours(),h=c.getMinutes(),i=c.getSeconds(),j=12>=g,k=0;k<a.length;k++){var l=a.substr(k,1);switch(l){case"d":var m=b.match(/^\d+/);m&&(d=m[0],b=b.replace(new RegExp("^"+m[0]),""));break;case"j":var m=b.match(/^\d+/);m&&(d=m[0],b=b.replace(new RegExp("^"+m[0]),""));break;case"D":for(var n="",o=0;o<this.days.length;o++)b.substr(0,3)==this.days[o].substr(0,3)&&(n=b.substr(0,3));""!=n&&(b=b.replace(new RegExp("^"+n),""));break;case"l":for(var n="",o=0;o<this.days.length;o++)b.substr(0,this.days[o].length)==this.days[o]&&(n=days[o]);""!=n&&(b=b.replace(new RegExp("^"+n),""));break;case"N":b=b.replace(/^\d/,"");break;case"S":b=b.replace(/^[st|nd|rd|th]/,"");break;case"w":b=b.replace(/^\d/,"");break;case"z":b=b.replace(/^\d{1,3}/,"");break;case"W":b=b.replace(/^\d{1,2}/,"");break;case"F":for(var n="",o=0;o<this.months.length;o++)b.substr(0,3)==this.months[o].substr(0,3)&&(n=b.substr(0,3));""!=n&&(b=b.replace(new RegExp("^"+n),""));break;case"M":for(var n="",o=0;o<this.months.length;o++)b.substr(0,this.months[o].length)==this.months[o]&&(n=this.months[o]);""!=n&&(b=b.replace(new RegExp("^"+n),""));break;case"m":var m=b.match(/^\d{1,2}/);m&&(e=m[0]-1,b=b.replace(new RegExp("^"+m[0]),""));break;case"n":var m=b.match(/^\d{1,2}/);m&&(e=m[0]-1,b=b.replace(new RegExp("^"+m[0]),""));break;case"t":b=b.replace(/^\d{1,2}/,"");break;case"Y":var m=b.match(/^\d{4}/);m&&(f=m[0],b=b.replace(new RegExp("^"+m[0]),""));break;case"y":var m=b.match(/^\d{2}/);m&&(f=f.substr(0,2)+m[0],b=b.replace(new RegExp("^"+m[0]),""));break;case"a":j="am"==b.substr(0,2),b=b.replace(/^\w\w/,"");break;case"A":j="AM"==b.substr(0,2),b=b.replace(/^\w\w/,"");break;case"g":var m=b.match(/^\d{1,2}/);m&&(g=1*m[0]+(j?12:0),b=b.replace(new RegExp("^"+m[0]),""));break;case"G":var m=b.match(/^\d{1,2}/);m&&(g=1*m[0],b=b.replace(new RegExp("^"+m[0]),""));break;case"h":var m=b.match(/^\d{1,2}/);m&&(g=1*m[0]+(j?12:0),b=b.replace(new RegExp("^"+m[0]),""));break;case"H":var m=b.match(/^\d{1,2}/);m&&(g=1*m[0],b=b.replace(new RegExp("^"+m[0]),""));break;case"i":var m=b.match(/^\d{1,2}/);m&&(h=1*m[0],b=b.replace(new RegExp("^"+m[0]),""));break;case"s":var m=b.match(/^\d{1,2}/);m&&(i=1*m[0],b=b.replace(new RegExp("^"+m[0]),""));break;default:b=b.substr(1,b.length-1)}}return new Date(f,e,d,g,h,i)};var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var b,c,d,e,f,g,h,i="",j=0;for(a=Base64._utf8_encode(a);j<a.length;)b=a.charCodeAt(j++),c=a.charCodeAt(j++),d=a.charCodeAt(j++),e=b>>2,f=(3&b)<<4|c>>4,g=(15&c)<<2|d>>6,h=63&d,isNaN(c)?g=h=64:isNaN(d)&&(h=64),i=i+this._keyStr.charAt(e)+this._keyStr.charAt(f)+this._keyStr.charAt(g)+this._keyStr.charAt(h);return i},decode:function(a){var b,c,d,e,f,g,h,i="",j=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");j<a.length;)e=this._keyStr.indexOf(a.charAt(j++)),f=this._keyStr.indexOf(a.charAt(j++)),g=this._keyStr.indexOf(a.charAt(j++)),h=this._keyStr.indexOf(a.charAt(j++)),b=e<<2|f>>4,c=(15&f)<<4|g>>2,d=(3&g)<<6|h,i+=String.fromCharCode(b),64!=g&&(i+=String.fromCharCode(c)),64!=h&&(i+=String.fromCharCode(d));return i=Base64._utf8_decode(i)},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):d>127&&2048>d?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b},_utf8_decode:function(a){for(var b="",c=0,d=c1=c2=0;c<a.length;)d=a.charCodeAt(c),128>d?(b+=String.fromCharCode(d),c++):d>191&&224>d?(c2=a.charCodeAt(c+1),b+=String.fromCharCode((31&d)<<6|63&c2),c+=2):(c2=a.charCodeAt(c+1),c3=a.charCodeAt(c+2),b+=String.fromCharCode((15&d)<<12|(63&c2)<<6|63&c3),c+=3);return b}};yoodoo.jsError=function(a){"undefined"!=typeof console&&"undefined"!=typeof console.log&&console.log(a),void 0===a.url&&(a={error:a.message}),a.callback="yoodoo.jsErrorSent",a.cmd="jserror",a.username=this.user.username,a.system=BrowserDetect.OS+" "+BrowserDetect.browser+" "+BrowserDetect.version,a.site=this.siteFolder,a.lastCommand=$(this.debuggerz.lastPost).html(),void 0===a.url?yoodoo.sendPost(null,a):yoodoo.sendPost(null,a)},yoodoo.jsErrorSent=function(a){"undefined"!=typeof console&&"undefined"!=typeof console.log&&console.log("error recorded")},yoodoo.ifApp=function(){return"undefined"!=typeof yoodooApp},yoodoo.appFunctionExists=function(a){if(this.ifApp()){for(var b=yoodooApp;a.length>0;){var c=a.shift();if(void 0===b[c])return!1;b=b[c]}return!0}return!1},yoodoo.sendingU=null,yoodoo.sendingF=null,yoodoo.sendingFr=null,yoodoo.pause=!1,yoodoo.postBuffer=[],yoodoo.sendingPost=!1,yoodoo.sendPost=function(u,f){if(yoodoo.sendingPost)yoodoo.postBuffer.push({u:u,f:f});else{if(yoodoo.sendingPost=!0,void 0!==f.cmd)if("objects"==f.cmd)if("load"==f.cmdaction&&(f.objectNames instanceof Array||f.objectIds instanceof Array)){var q=[];f.objectNames instanceof Array&&f.objectNames.length>0&&q.push(f.objectNames.join(",")),f.objectIds instanceof Array&&f.objectIds.length>0&&q.push(f.objectIds.join(",")),yoodoo.debuggerz.sendpost(f.cmd+" "+f.cmdaction+" ["+q.join(",")+"]")}else"view"==f.cmdaction?yoodoo.debuggerz.sendpost(f.cmd+" "+f.cmdaction+" ["+f.viewId+"]"):f.objectId>0?yoodoo.debuggerz.sendpost(f.cmd+" "+f.cmdaction+" in "+f.objectId):yoodoo.debuggerz.sendpost(f.cmd+" "+f.cmdaction);else yoodoo.debuggerz.sendpost(f.cmd);yoodoo.debuggerz.getAllItems&&(f.getAllItems=1);var otherData=!0;if(arguments.length>3&&(otherData=arguments[3]),this.pause=!1,f.userhash=this.loginCode,f.sitehash=this.sitehash,f.language=yoodoo.words.language,void 0!==yoodoo.metaphor&&(f.metaphor=yoodoo.metaphor),otherData){var meta=this.changed_meta();f.record_metas=1;for(var k in meta)f["meta_"+k]=meta[k];var ut=this.changed_users_totals();for(var k in ut)f["usersTotals_"+k]=ut[k]}if(void 0!==this.serverTimeOffset&&(f.timestamp=yoodoo.formatDate("d/m/Y H:i:s",new Date((new Date).getTime()+this.serverTimeOffset))),yoodoo.loggedin&&(f.actionsLog=this.actionLogging.output()),f.isApp=!1,yoodoo.isApp===!0&&(f.isApp=!0),this.trigger_list.length>0)for(f.triggers=[];this.trigger_list.length>0;)f.triggers.push(this.trigger_list.shift());if(yoodoo.console(f),void 0===f.addTags&&(dooit.addTags.length>0&&(f.addtags=dooit.addTags.join(",")),dooit.removeTags.length>0&&(f.removetags=dooit.removeTags.join(",")),dooit.addTags=[],dooit.removeTags=[]),null===u&&(u=this.option.yoodooPortal.url),u+="?r="+(new Date).getTime(),arguments.length>2&&(this.pause=arguments[2]),this.pause&&(f.callback="yoodoo.console"),this.sendingU=u,this.sendingF=f,this.ajax===!0){f.ajax=!0;var callback=f.callback,context=this;void 0!==f.context&&(context=f.context,f.context=void 0),$.ajax(u,{data:f,dataType:"text",type:"POST",context:context,complete:function(){if(yoodoo.sendingPost=!1,yoodoo.postBuffer.length>0){var a=yoodoo.postBuffer.shift();yoodoo.sendPost(a.u,a.f)}},success:function(r){if("error"==r)yoodoo.logout();else try{var f=eval(callback);"function"==typeof f&&f.apply(this,[r])}catch(e){yoodoo.jsError(e)}}})}else this.sendingF.context=void 0,this.sendingFr=yoodoo.e("iframe"),this.sendingFr.id="yoodooPoster",this.sendingFr.loaded=!1,document.body.appendChild(this.sendingFr),yoodoo.writeIframe()}},yoodoo.writeIframe=function(){if(!this.sendingFr.loaded){this.initPostResponder(),void 0===this.sendingFr.tries&&(this.sendingFr.tries=0),
this.sendingFr.tries++,this.sendingFr.loaded=!0;var a=null;if(this.sendingFr.contentDocument?a=this.sendingFr.contentDocument:this.sendingFr.contentWindow?a=this.sendingFr.contentWindow.document:this.sendingFr.document&&(a=this.sendingFr.document),null!==a){try{a.open()}catch(b){return yoodoo.errorLog(b),this.sendingFr.tries>5?(alert("A security error is preventing this system from operating correctly"),!1):(yoodoo.sendingFr.loaded=!1,setTimeout("yoodoo.writeIframe()",200),!1)}var c="";c+="<html><head></head><body><form id='yoodooPost' action='"+this.sendingU+"' method='POST'>";for(k in this.sendingF)if(null!==this.sendingF[k]&&"object"==typeof this.sendingF[k]&&this.sendingF[k].length>0)for(var d=0;d<this.sendingF[k].length;d++)c+="<textarea name='"+k+"[]'>"+this.sendingF[k][d]+"</textarea>";else null!==this.sendingF[k]&&(/^EF/.test(k)&&(c+="<input type='text' name='fields[]' value='"+k.replace(/^EF/,"")+"' />"),c+="<textarea name='"+k+"'>"+this.sendingF[k]+"</textarea>");c+="</form>",this.pause||"xmlbookcase2"==this.sendingF.cmd||(c+="<script type='text/javascript'>document.getElementById('yoodooPost').submit();</script>"),c+="</body></html>",a.writeln(c),a.close(),this.timeout=setTimeout("yoodoo.cancelPost()",this.timeoutDelay),$(this.sendingFr).bind("load",function(){var a=yoodoo.sendingFr.contentWindow;a.postMessage?a.postMessage("completed",yoodoo.option.baseUrl):a.completed&&a.completed()})}}},yoodoo.cancelPost=function(){if(!this.pause&&(yoodoo.sendingPost=!1,this.removePostResponder(),$(this.sendingFr).unbind("load"),clearTimeout(this.timeout),this.timeout=null,this.sendingFr.parentNode&&this.sendingFr.parentNode.removeChild(this.sendingFr),yoodoo.working(!0,'<div class="oops">'+yoodoo.w("oops")+'<br /><button class="green" type="button">'+yoodoo.w("ok")+"</button></div>"),$(this.wait).find("button.green").bind("click",function(){$(this).blur(),yoodoo.working(!1),yoodoo.clearFocus()}),this.hide(),yoodoo.postBuffer.length>0)){var a=yoodoo.postBuffer.splice(0,1)[0];yoodoo.sendPost(a.u,a.f)}},yoodoo.postReply=function(e){if(e.source!=this.lastReplyFrame){yoodoo.debuggerz.receivedpost(),this.lastReplyFrame=e.source,yoodoo.removePostResponder(),clearTimeout(yoodoo.timeout),yoodoo.timeout=null;var parts=yoodoo.translateXML(e.data).split("|");if(parts.length>1)if(/^error$/.test(parts[1]))yoodoo.logout();else{var rg="^"+parts[0].replace(/\./g,"\\.").replace(/\[/g,"\\[").replace(/\]/g,"\\]")+"\\|",caller=new RegExp(rg),op=e.data.replace(caller,"");eval(parts[0]+"('"+op.replace(/'/g,"\\'")+"');")}else if(/^error/.test(parts[0]))return yoodoo.logout();for(var fr=$("#yoodooPoster").get(),i=fr.length-1;i>=0;i--)fr[i].contentWindow==e.source&&fr[i].parentNode.removeChild(fr[i]);yoodoo.clearFocus()}if(yoodoo.sendingPost=!1,yoodoo.postBuffer.length>0){var toSend=yoodoo.postBuffer.splice(0,1)[0];yoodoo.sendPost(toSend.u,toSend.f)}},yoodoo.thousands=function(a){return a=parseInt(a).toString(),a=a.replace(/(\d)(\d\d\d)$/,"$1,$2").replace(/(\d\d\d\,)/g,",$1"),a.replace(/^\,/,"")},yoodoo.clipboard={data:{},recover:function(){if("object"==typeof localStorage&&void 0!==localStorage.yoodooClipboard)try{this.data=$.parseJSON(localStorage.yoodooClipboard)}catch(a){}},clear:function(){this.data={},localStorage.yoodooClipboard=""},add:function(a,b,c,d){void 0===this.data[a]&&(this.data[a]={}),this.data[a][b]={c:(new Date).getTime(),d:c,m:d},localStorage.yoodooClipboard=JSON.stringify(this.data),yoodoo.alert("&lsquo;"+b+"&rsquo; add to the clipboard",[],4)},list:function(a){return void 0!==this.data[a]?this.data[a]:{}},erase:function(a,b){void 0!==this.data[b]&&void 0!==this.data[b][a.title]&&delete this.data[b][a.title],localStorage.yoodooClipboard=JSON.stringify(this.data)},selector:function(a,b){this.recover();var c=$(yoodoo.e("div")).addClass("clipboardList"),d=$(yoodoo.e("div")).addClass("clipboard").append($(yoodoo.e("div")).addClass("clipboardArena").append($(yoodoo.e("h2")).html("Clipboard")).append(c)),e=this.list(b),f=new yoodoo.ui.dialog({html:d,blockoutClickClose:!0,closeButton:!0}),g=[];for(var h in e)g.push([h,e[h].c]);g.sort(function(a,b){return b[1]-a[1]});for(var i in g){var h=g[i][0];!function(){var d=e[h];c.append($(yoodoo.e("button")).attr("type","button").html(h).append($(yoodoo.e("div")).html(d.m)).prepend($(yoodoo.e("span")).html(yoodoo.ago(new Date(d.c))).append($(yoodoo.e("button")).attr("type","button").append(yoodoo.icons.get("close",12,12)).click(function(a){a.preventDefault(),yoodoo.clipboard.erase(d,b),$(this).parent().parent().slideUp(500,function(){$(this).remove()})}))).click(function(b){var c=b.target;"BUTTON"!=c.tagName&&(c=yoodoo.parentOfType(c,["BUTTON"])),c!==this||(f.close(),a(d.d))}))}()}f.render()}},yoodoo.clipboard.recover(),window.onerror=function(a,b,c,d,e){var f="";"undefined"!=typeof e&&"string"==typeof e.stack&&(f=e.stack.substring(0,512)),""!=yoodoo.loginCode&&yoodoo.jsError({error:a,url:b,line:c,stack:f})},yoodooKeylog={},window.onkeydown=function(a){window.event?yoodooKeylog[window.event.keyCode]=!0:yoodooKeylog[a.which]=!0},window.onkeyup=function(a){window.event?yoodooKeylog[window.event.keyCode]=!1:yoodooKeylog[a.which]=!1},window.onblur=function(){yoodooKeylog={}},yoodoo.md5={hexcase:0,b64pad:"",hex_md5:function(a){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(a)))},b64_md5:function(a){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(a)))},any_md5:function(a,b){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(a)),b)},hex_hmac_md5:function(a,b){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(a),this.str2rstr_utf8(b)))},b64_hmac_md5:function(a,b){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(a),this.str2rstr_utf8(b)))},any_hmac_md5:function(a,b,c){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(a),this.str2rstr_utf8(b)),c)},md5_vm_test:function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},rstr_md5:function(a){return this.binl2rstr(this.binl_md5(this.rstr2binl(a),8*a.length))},rstr_hmac_md5:function(a,b){var c=this.rstr2binl(a);c.length>16&&(c=this.binl_md5(c,8*a.length));for(var d=Array(16),e=Array(16),f=0;16>f;f++)d[f]=909522486^c[f],e[f]=1549556828^c[f];var g=this.binl_md5(d.concat(this.rstr2binl(b)),512+8*b.length);return this.binl2rstr(this.binl_md5(e.concat(g),640))},rstr2hex:function(a){try{this.hexcase}catch(b){yoodoo.errorLog(b),this.hexcase=0}for(var c,d=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",e="",f=0;f<a.length;f++)c=a.charCodeAt(f),e+=d.charAt(c>>>4&15)+d.charAt(15&c);return e},rstr2b64:function(a){try{this.b64pad}catch(b){yoodoo.errorLog(b),this.b64pad=""}for(var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d="",e=a.length,f=0;e>f;f+=3)for(var g=a.charCodeAt(f)<<16|(e>f+1?a.charCodeAt(f+1)<<8:0)|(e>f+2?a.charCodeAt(f+2):0),h=0;4>h;h++)d+=8*f+6*h>8*a.length?this.b64pad:c.charAt(g>>>6*(3-h)&63);return d},rstr2any:function(a,b){var c,d,e,f,g,h=b.length,i=Array(Math.ceil(a.length/2));for(c=0;c<i.length;c++)i[c]=a.charCodeAt(2*c)<<8|a.charCodeAt(2*c+1);var j=Math.ceil(8*a.length/(Math.log(b.length)/Math.log(2))),k=Array(j);for(d=0;j>d;d++){for(g=Array(),f=0,c=0;c<i.length;c++)f=(f<<16)+i[c],e=Math.floor(f/h),f-=e*h,(g.length>0||e>0)&&(g[g.length]=e);k[d]=f,i=g}var l="";for(c=k.length-1;c>=0;c--)l+=b.charAt(k[c]);return l},str2rstr_utf8:function(a){for(var b,c,d="",e=-1;++e<a.length;)b=a.charCodeAt(e),c=e+1<a.length?a.charCodeAt(e+1):0,b>=55296&&56319>=b&&c>=56320&&57343>=c&&(b=65536+((1023&b)<<10)+(1023&c),e++),127>=b?d+=String.fromCharCode(b):2047>=b?d+=String.fromCharCode(192|b>>>6&31,128|63&b):65535>=b?d+=String.fromCharCode(224|b>>>12&15,128|b>>>6&63,128|63&b):2097151>=b&&(d+=String.fromCharCode(240|b>>>18&7,128|b>>>12&63,128|b>>>6&63,128|63&b));return d},str2rstr_utf16le:function(a){for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(255&a.charCodeAt(c),a.charCodeAt(c)>>>8&255);return b},str2rstr_utf16be:function(a){for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(a.charCodeAt(c)>>>8&255,255&a.charCodeAt(c));return b},rstr2binl:function(a){for(var b=Array(a.length>>2),c=0;c<b.length;c++)b[c]=0;for(var c=0;c<8*a.length;c+=8)b[c>>5]|=(255&a.charCodeAt(c/8))<<c%32;return b},binl2rstr:function(a){for(var b="",c=0;c<32*a.length;c+=8)b+=String.fromCharCode(a[c>>5]>>>c%32&255);return b},binl_md5:function(a,b){a[b>>5]|=128<<b%32,a[(b+64>>>9<<4)+14]=b;for(var c=1732584193,d=-271733879,e=-1732584194,f=271733878,g=0;g<a.length;g+=16){var h=c,i=d,j=e,k=f;c=this.md5_ff(c,d,e,f,a[g+0],7,-680876936),f=this.md5_ff(f,c,d,e,a[g+1],12,-389564586),e=this.md5_ff(e,f,c,d,a[g+2],17,606105819),d=this.md5_ff(d,e,f,c,a[g+3],22,-1044525330),c=this.md5_ff(c,d,e,f,a[g+4],7,-176418897),f=this.md5_ff(f,c,d,e,a[g+5],12,1200080426),e=this.md5_ff(e,f,c,d,a[g+6],17,-1473231341),d=this.md5_ff(d,e,f,c,a[g+7],22,-45705983),c=this.md5_ff(c,d,e,f,a[g+8],7,1770035416),f=this.md5_ff(f,c,d,e,a[g+9],12,-1958414417),e=this.md5_ff(e,f,c,d,a[g+10],17,-42063),d=this.md5_ff(d,e,f,c,a[g+11],22,-1990404162),c=this.md5_ff(c,d,e,f,a[g+12],7,1804603682),f=this.md5_ff(f,c,d,e,a[g+13],12,-40341101),e=this.md5_ff(e,f,c,d,a[g+14],17,-1502002290),d=this.md5_ff(d,e,f,c,a[g+15],22,1236535329),c=this.md5_gg(c,d,e,f,a[g+1],5,-165796510),f=this.md5_gg(f,c,d,e,a[g+6],9,-1069501632),e=this.md5_gg(e,f,c,d,a[g+11],14,643717713),d=this.md5_gg(d,e,f,c,a[g+0],20,-373897302),c=this.md5_gg(c,d,e,f,a[g+5],5,-701558691),f=this.md5_gg(f,c,d,e,a[g+10],9,38016083),e=this.md5_gg(e,f,c,d,a[g+15],14,-660478335),d=this.md5_gg(d,e,f,c,a[g+4],20,-405537848),c=this.md5_gg(c,d,e,f,a[g+9],5,568446438),f=this.md5_gg(f,c,d,e,a[g+14],9,-1019803690),e=this.md5_gg(e,f,c,d,a[g+3],14,-187363961),d=this.md5_gg(d,e,f,c,a[g+8],20,1163531501),c=this.md5_gg(c,d,e,f,a[g+13],5,-1444681467),f=this.md5_gg(f,c,d,e,a[g+2],9,-51403784),e=this.md5_gg(e,f,c,d,a[g+7],14,1735328473),d=this.md5_gg(d,e,f,c,a[g+12],20,-1926607734),c=this.md5_hh(c,d,e,f,a[g+5],4,-378558),f=this.md5_hh(f,c,d,e,a[g+8],11,-2022574463),e=this.md5_hh(e,f,c,d,a[g+11],16,1839030562),d=this.md5_hh(d,e,f,c,a[g+14],23,-35309556),c=this.md5_hh(c,d,e,f,a[g+1],4,-1530992060),f=this.md5_hh(f,c,d,e,a[g+4],11,1272893353),e=this.md5_hh(e,f,c,d,a[g+7],16,-155497632),d=this.md5_hh(d,e,f,c,a[g+10],23,-1094730640),c=this.md5_hh(c,d,e,f,a[g+13],4,681279174),f=this.md5_hh(f,c,d,e,a[g+0],11,-358537222),e=this.md5_hh(e,f,c,d,a[g+3],16,-722521979),d=this.md5_hh(d,e,f,c,a[g+6],23,76029189),c=this.md5_hh(c,d,e,f,a[g+9],4,-640364487),f=this.md5_hh(f,c,d,e,a[g+12],11,-421815835),e=this.md5_hh(e,f,c,d,a[g+15],16,530742520),d=this.md5_hh(d,e,f,c,a[g+2],23,-995338651),c=this.md5_ii(c,d,e,f,a[g+0],6,-198630844),f=this.md5_ii(f,c,d,e,a[g+7],10,1126891415),e=this.md5_ii(e,f,c,d,a[g+14],15,-1416354905),d=this.md5_ii(d,e,f,c,a[g+5],21,-57434055),c=this.md5_ii(c,d,e,f,a[g+12],6,1700485571),f=this.md5_ii(f,c,d,e,a[g+3],10,-1894986606),e=this.md5_ii(e,f,c,d,a[g+10],15,-1051523),d=this.md5_ii(d,e,f,c,a[g+1],21,-2054922799),c=this.md5_ii(c,d,e,f,a[g+8],6,1873313359),f=this.md5_ii(f,c,d,e,a[g+15],10,-30611744),e=this.md5_ii(e,f,c,d,a[g+6],15,-1560198380),d=this.md5_ii(d,e,f,c,a[g+13],21,1309151649),c=this.md5_ii(c,d,e,f,a[g+4],6,-145523070),f=this.md5_ii(f,c,d,e,a[g+11],10,-1120210379),e=this.md5_ii(e,f,c,d,a[g+2],15,718787259),d=this.md5_ii(d,e,f,c,a[g+9],21,-343485551),c=this.safe_add(c,h),d=this.safe_add(d,i),e=this.safe_add(e,j),f=this.safe_add(f,k)}return Array(c,d,e,f)},md5_cmn:function(a,b,c,d,e,f){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(b,a),this.safe_add(d,f)),e),c)},md5_ff:function(a,b,c,d,e,f,g){return this.md5_cmn(b&c|~b&d,a,b,e,f,g)},md5_gg:function(a,b,c,d,e,f,g){return this.md5_cmn(b&d|c&~d,a,b,e,f,g)},md5_hh:function(a,b,c,d,e,f,g){return this.md5_cmn(b^c^d,a,b,e,f,g)},md5_ii:function(a,b,c,d,e,f,g){return this.md5_cmn(c^(b|~d),a,b,e,f,g)},safe_add:function(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c},bit_rol:function(a,b){return a<<b|a>>>32-b}};
//# sourceMappingURL=yoodoo.map